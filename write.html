<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>게시글 작성</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>

        function addPost() {
            var title = document.getElementById("ptitle").value;
            var writer = document.getElementById("pwriter").value;
            var content = document.getElementById("pcontent").value;

            var pDiv = document.getElementById("main");
            const newCode = `
            <div class="main-body">
                <img class="card-img" src="images/3.webp" alt="이미지"></img>
                <h3 class="main-title">${title}</h3>
                <p class="main-writer">${writer}</p>
                <p class="main-content">${content}</p>
            </div>`;
            pDiv.innerHTML = newCode;

            var mtext = pDiv.querySelector(".main-text");
            var mimg = pDiv.querySelector(".main-img-bottom");

            pDiv.addEventListener("click", function() {
                if(mtext.style.display === "none") {
                    mtext.style.display = "block";
                    mimg.style.display = "none";
                }
            });

            document.getElementById("ptitle").value = " ";
            document.getElementById("pwriter").value = " ";
            document.getElementById("pcontent").value = " ";

            $("#addPost").modal("hide");
        };

        function addPostPage() {
            $("#addPost").modal("show");
        };

    </script>

    <style>
        .modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .content {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 600px;
            height: 600px;
            padding: 40px;
            text-align: center;
            background-color: white;
            border-radius: 10px;
            transform: translateX(-50%) translateY(-50%);
        }

        .imbtn {
            display: flex;
            justify-content: center;
        }

        #chooseFile {
            visibility: hidden;
        }

        .fc {
            width: 100%;
        }
    </style>
</head>

<body>
    <div><button type="button" class="btn btn-primary" onclick="addPostPage()">새 글 작성</button></div>
    <div class="modal" id="addPost" tabindex="-1" role="dialog" aria-labelledby="addPostLabel" aria-hidden="true">
        <div class="dlog" role="document">
            <div class="content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addPostModalLabel">새 글 작성</h5>
                </div>
                <div class="info" style="margin-top: 10px;">
                    <div class="form_group">
                        <div class="imbtn"><button type="button" class="btn btn-dark"><label for="chooseFile">사진
                                    선택</label></button></div>
                        <input type="file" id="chooseFile" name="chooseFile" accept="image/*" onchange="loadFile(this)">
                    </div>
                    <div class="form_group">
                        <label for="ptitle">제목</label>
                        <input type="text" class="fc" id="ptitle">
                    </div>
                    <div class="form_group">
                        <label for="pwriter">작성자</label>
                        <input type="text" class="fc" id="pwriter">
                    </div>
                    <div class="form_group">
                        <select class="form-select form-select-sm" aria-label="Small select example">
                            <option selected>카테고리 선택</option>
                            <option value="1">인물</option>
                            <option value="2">캐릭터</option>
                            <option value="3">음식</option>
                            <option value="4">동물</option>
                            <option value="5">향수</option>
                        </select>
                    </div>
                    <div class="form_group">
                        <label for="pcontent">내용</label>
                        <textarea class="fc" id="pcontent" rows="5"></textarea>
                    </div>
                </div>
                <div class="footer" style="margin-top: 10px;">
                    <button type="button" class="btn btn-info" id="ubtn" onclick="addPost()">등록</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>
    <div id="main"></div>
</body>

</html>